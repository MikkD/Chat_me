{"ast":null,"code":"var _jsxFileName = \"/Users/nikitapetrov/Desktop/chat_me_app/client/src/components/Chat/Chat.js\";\nimport React, { useState, useEffect } from 'react';\nimport queryString from 'query-string';\nimport { Link } from 'react-router-dom';\nimport { ReactComponent as Logo } from \"@svgr/webpack?-svgo,+titleProp,+ref!./heart.svg\";\nimport { ReactComponent as ChatLogo } from \"@svgr/webpack?-svgo,+titleProp,+ref!./chat-logo.svg\";\nimport { ReactComponent as Users } from \"@svgr/webpack?-svgo,+titleProp,+ref!./group.svg\";\nimport { ReactComponent as SendIcon } from \"@svgr/webpack?-svgo,+titleProp,+ref!./send-message.svg\";\nimport './Chat.css';\n\nconst moment = require('moment'); // Setting up Socket on a Front-End\n\n\nconst io = require('socket.io-client');\n\nconst localhost = 'http://localhost:5000';\n\nconst Chat = ({\n  location\n}) => {\n  const [enteredUser, setEnteredUser] = useState('');\n  const [enteredRoom, setEnteredRoom] = useState('');\n  const [welcomeUser, setWelcomeUser] = useState([]);\n  const [onlineUsers, setOnlineUsers] = useState([]);\n  const [inputValue, setInputValue] = useState('');\n  const [messages, setMessages] = useState('');\n  const socket = io.connect(localhost); // 1 Initial connection and disconnection\n\n  useEffect(() => {\n    console.log('onlineUsers', v); // const socket = io.connect(localhost);\n\n    const {\n      name,\n      room\n    } = queryString.parse(location.search);\n    setEnteredUser(name);\n    setEnteredRoom(room);\n    socket.emit('newUser', {\n      name,\n      room\n    }, error => {\n      console.error('error on client');\n    });\n    return () => {\n      socket.disconnect();\n    };\n  }, [location.search]); // 2 Handling welcome, new user messages.\n\n  useEffect(() => {\n    socket.on('welcome', user => {\n      console.log('user  on welcome || left ', user);\n\n      if (user.name) {\n        setWelcomeUser(oldstate => [...oldstate, user]);\n      }\n    });\n  }); //  3 Handling user left message\n\n  useEffect(() => {\n    socket.on('disconnectedUser', lefUser => {\n      console.log('disconnectedUser', lefUser);\n      setWelcomeUser(oldstate => [...oldstate, lefUser]);\n    });\n  }); // 4 Handling online users\n\n  useEffect(() => {\n    socket.on('onlineUsers', theOnlineUsers => {\n      console.log('onlineUsers', theOnlineUsers); // setOnlineUsers(prevOnlineUsers => [...prevOnlineUsers, theOnlineUsers])\n\n      setOnlineUsers(theOnlineUsers);\n    });\n  }); // 5 Handling sending meesage\n\n  const sendMessage = () => {\n    const theMessage = {\n      name: enteredUser.toLowerCase(),\n      room: enteredRoom.toLowerCase(),\n      msg: inputValue,\n      time: moment().format('h:m:s a')\n    };\n    socket.emit('message', theMessage);\n  }; // 6 Handling recieved message from socket\n\n\n  useEffect(() => {\n    socket.on('theMessage', theMessage => {\n      console.log('theMessage', theMessage);\n      setMessages(prevMessage => [...prevMessage, theMessage]);\n    });\n  });\n  return /*#__PURE__*/React.createElement(\"main\", {\n    className: \"main-block\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 94,\n      columnNumber: 9\n    }\n  }, /*#__PURE__*/React.createElement(\"div\", {\n    className: \"flex-main\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 95,\n      columnNumber: 13\n    }\n  }, /*#__PURE__*/React.createElement(\"div\", {\n    className: \"flex-item flex-header\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 97,\n      columnNumber: 17\n    }\n  }, /*#__PURE__*/React.createElement(\"h3\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 98,\n      columnNumber: 21\n    }\n  }, \"Chat&Me\", /*#__PURE__*/React.createElement(Logo, {\n    className: \"logo-header\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 98,\n      columnNumber: 32\n    }\n  })), /*#__PURE__*/React.createElement(Link, {\n    to: '/',\n    className: \"leave-room-button\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 99,\n      columnNumber: 21\n    }\n  }, \"Leave Room\")), /*#__PURE__*/React.createElement(\"div\", {\n    className: \"flex-item flex-body\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 102,\n      columnNumber: 17\n    }\n  }, /*#__PURE__*/React.createElement(\"div\", {\n    className: \"flex-body-nav\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 104,\n      columnNumber: 21\n    }\n  }, /*#__PURE__*/React.createElement(\"h3\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 105,\n      columnNumber: 25\n    }\n  }, /*#__PURE__*/React.createElement(ChatLogo, {\n    className: \"logo-nav\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 105,\n      columnNumber: 29\n    }\n  }), \"Room:\"), /*#__PURE__*/React.createElement(\"p\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 106,\n      columnNumber: 25\n    }\n  }, enteredRoom), /*#__PURE__*/React.createElement(\"h3\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 108,\n      columnNumber: 25\n    }\n  }, /*#__PURE__*/React.createElement(Users, {\n    className: \"logo-nav\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 108,\n      columnNumber: 29\n    }\n  }), \"Users:\"), onlineUsers.length ? onlineUsers.map((user, index) => /*#__PURE__*/React.createElement(\"p\", {\n    className: \"first-capital-case\",\n    key: index,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 110,\n      columnNumber: 62\n    }\n  }, user.name)) : null), /*#__PURE__*/React.createElement(\"div\", {\n    className: \"flex-body-chat\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 114,\n      columnNumber: 21\n    }\n  }, welcomeUser.length > 0 ? welcomeUser.map((user, index) => {\n    return /*#__PURE__*/React.createElement(\"div\", {\n      key: index,\n      className: \"flex-body-chat-message\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 119,\n        columnNumber: 37\n      }\n    }, /*#__PURE__*/React.createElement(\"h5\", {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 120,\n        columnNumber: 41\n      }\n    }, /*#__PURE__*/React.createElement(\"span\", {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 120,\n        columnNumber: 45\n      }\n    }, user.time)), /*#__PURE__*/React.createElement(\"p\", {\n      className: \"first-capital-case\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 121,\n        columnNumber: 41\n      }\n    }, user.msg));\n  }) : null, messages.length ? messages.map((message, index) => {\n    return /*#__PURE__*/React.createElement(\"div\", {\n      key: index,\n      className: \"flex-body-chat-message\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 129,\n        columnNumber: 33\n      }\n    }, /*#__PURE__*/React.createElement(\"h5\", {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 130,\n        columnNumber: 37\n      }\n    }, message.name, /*#__PURE__*/React.createElement(\"span\", {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 130,\n        columnNumber: 55\n      }\n    }, message.time)), /*#__PURE__*/React.createElement(\"p\", {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 131,\n        columnNumber: 37\n      }\n    }, message.msg));\n  }) : null)), /*#__PURE__*/React.createElement(\"div\", {\n    className: \"flex-item flex-footer\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 138,\n      columnNumber: 17\n    }\n  }, /*#__PURE__*/React.createElement(\"div\", {\n    className: \"footer-wrapper\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 139,\n      columnNumber: 21\n    }\n  }, /*#__PURE__*/React.createElement(\"input\", {\n    onKeyPress: event => event.key === \"Enter\" ? sendMessage() : null,\n    onChange: event => setInputValue(event.target.value),\n    className: \"send-message-input\",\n    placeholder: \"Enter message\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 140,\n      columnNumber: 25\n    }\n  }), /*#__PURE__*/React.createElement(\"button\", {\n    onClick: sendMessage,\n    className: \"send-message-button\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 145,\n      columnNumber: 25\n    }\n  }, /*#__PURE__*/React.createElement(SendIcon, {\n    className: \"send-message-icon\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 147,\n      columnNumber: 61\n    }\n  }))))));\n};\n\nexport default Chat;","map":{"version":3,"sources":["/Users/nikitapetrov/Desktop/chat_me_app/client/src/components/Chat/Chat.js"],"names":["React","useState","useEffect","queryString","Link","moment","require","io","localhost","Chat","location","enteredUser","setEnteredUser","enteredRoom","setEnteredRoom","welcomeUser","setWelcomeUser","onlineUsers","setOnlineUsers","inputValue","setInputValue","messages","setMessages","socket","connect","console","log","v","name","room","parse","search","emit","error","disconnect","on","user","oldstate","lefUser","theOnlineUsers","sendMessage","theMessage","toLowerCase","msg","time","format","prevMessage","length","map","index","message","event","key","target","value"],"mappings":";AAAA,OAAOA,KAAP,IAAgBC,QAAhB,EAA0BC,SAA1B,QAA2C,OAA3C;AACA,OAAOC,WAAP,MAAwB,cAAxB;AACA,SAASC,IAAT,QAAqB,kBAArB;;;;;AAKA,OAAO,YAAP;;AACA,MAAMC,MAAM,GAAGC,OAAO,CAAC,QAAD,CAAtB,C,CAEA;;;AACA,MAAMC,EAAE,GAAGD,OAAO,CAAC,kBAAD,CAAlB;;AACA,MAAME,SAAS,GAAG,uBAAlB;;AAEA,MAAMC,IAAI,GAAG,CAAC;AAAEC,EAAAA;AAAF,CAAD,KAAkB;AAC3B,QAAM,CAACC,WAAD,EAAcC,cAAd,IAAgCX,QAAQ,CAAC,EAAD,CAA9C;AACA,QAAM,CAACY,WAAD,EAAcC,cAAd,IAAgCb,QAAQ,CAAC,EAAD,CAA9C;AACA,QAAM,CAACc,WAAD,EAAcC,cAAd,IAAgCf,QAAQ,CAAC,EAAD,CAA9C;AACA,QAAM,CAACgB,WAAD,EAAcC,cAAd,IAAgCjB,QAAQ,CAAC,EAAD,CAA9C;AACA,QAAM,CAACkB,UAAD,EAAaC,aAAb,IAA8BnB,QAAQ,CAAC,EAAD,CAA5C;AACA,QAAM,CAACoB,QAAD,EAAWC,WAAX,IAA0BrB,QAAQ,CAAC,EAAD,CAAxC;AACA,QAAMsB,MAAM,GAAGhB,EAAE,CAACiB,OAAH,CAAWhB,SAAX,CAAf,CAP2B,CAW3B;;AACAN,EAAAA,SAAS,CAAC,MAAM;AACZuB,IAAAA,OAAO,CAACC,GAAR,CAAY,aAAZ,EAA2BC,CAA3B,EADY,CAEZ;;AACA,UAAM;AAAEC,MAAAA,IAAF;AAAQC,MAAAA;AAAR,QAAiB1B,WAAW,CAAC2B,KAAZ,CAAkBpB,QAAQ,CAACqB,MAA3B,CAAvB;AACAnB,IAAAA,cAAc,CAACgB,IAAD,CAAd;AACAd,IAAAA,cAAc,CAACe,IAAD,CAAd;AAEAN,IAAAA,MAAM,CAACS,IAAP,CAAY,SAAZ,EAAwB;AAAEJ,MAAAA,IAAF;AAAQC,MAAAA;AAAR,KAAxB,EAA0CI,KAAD,IAAW;AAChDR,MAAAA,OAAO,CAACQ,KAAR,CAAc,iBAAd;AACH,KAFD;AAIA,WAAO,MAAM;AACTV,MAAAA,MAAM,CAACW,UAAP;AACH,KAFD;AAGH,GAdQ,EAcN,CAACxB,QAAQ,CAACqB,MAAV,CAdM,CAAT,CAZ2B,CA6B3B;;AACA7B,EAAAA,SAAS,CAAC,MAAM;AACZqB,IAAAA,MAAM,CAACY,EAAP,CAAU,SAAV,EAAsBC,IAAD,IAAU;AAC3BX,MAAAA,OAAO,CAACC,GAAR,CAAY,2BAAZ,EAAyCU,IAAzC;;AACA,UAAIA,IAAI,CAACR,IAAT,EAAe;AACXZ,QAAAA,cAAc,CAACqB,QAAQ,IAAI,CAAC,GAAGA,QAAJ,EAAcD,IAAd,CAAb,CAAd;AACH;AACJ,KALD;AAMH,GAPQ,CAAT,CA9B2B,CAwC3B;;AACAlC,EAAAA,SAAS,CAAC,MAAM;AACZqB,IAAAA,MAAM,CAACY,EAAP,CAAU,kBAAV,EAA+BG,OAAD,IAAa;AACvCb,MAAAA,OAAO,CAACC,GAAR,CAAY,kBAAZ,EAAgCY,OAAhC;AACAtB,MAAAA,cAAc,CAACqB,QAAQ,IAAI,CAAC,GAAGA,QAAJ,EAAcC,OAAd,CAAb,CAAd;AACH,KAHD;AAIH,GALQ,CAAT,CAzC2B,CAiD3B;;AACApC,EAAAA,SAAS,CAAC,MAAM;AACZqB,IAAAA,MAAM,CAACY,EAAP,CAAU,aAAV,EAA0BI,cAAD,IAAoB;AACzCd,MAAAA,OAAO,CAACC,GAAR,CAAY,aAAZ,EAA2Ba,cAA3B,EADyC,CAEzC;;AACArB,MAAAA,cAAc,CAACqB,cAAD,CAAd;AACH,KAJD;AAKH,GANQ,CAAT,CAlD2B,CA0D3B;;AACA,QAAMC,WAAW,GAAG,MAAM;AACtB,UAAMC,UAAU,GAAG;AACfb,MAAAA,IAAI,EAAEjB,WAAW,CAAC+B,WAAZ,EADS;AAEfb,MAAAA,IAAI,EAAEhB,WAAW,CAAC6B,WAAZ,EAFS;AAGfC,MAAAA,GAAG,EAAExB,UAHU;AAIfyB,MAAAA,IAAI,EAAEvC,MAAM,GAAGwC,MAAT,CAAgB,SAAhB;AAJS,KAAnB;AAMAtB,IAAAA,MAAM,CAACS,IAAP,CAAY,SAAZ,EAAwBS,UAAxB;AACH,GARD,CA3D2B,CAqE3B;;;AACAvC,EAAAA,SAAS,CAAC,MAAM;AACZqB,IAAAA,MAAM,CAACY,EAAP,CAAU,YAAV,EAAyBM,UAAD,IAAgB;AACpChB,MAAAA,OAAO,CAACC,GAAR,CAAY,YAAZ,EAA0Be,UAA1B;AACAnB,MAAAA,WAAW,CAACwB,WAAW,IAAI,CAAC,GAAGA,WAAJ,EAAiBL,UAAjB,CAAhB,CAAX;AACH,KAHD;AAIH,GALQ,CAAT;AAQA,sBACI;AAAM,IAAA,SAAS,EAAC,YAAhB;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,kBACI;AAAK,IAAA,SAAS,EAAC,WAAf;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,kBAEI;AAAK,IAAA,SAAS,EAAC,uBAAf;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,kBACI;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,6BAAW,oBAAC,IAAD;AAAM,IAAA,SAAS,EAAC,aAAhB;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,IAAX,CADJ,eAEI,oBAAC,IAAD;AAAM,IAAA,EAAE,EAAE,GAAV;AAAe,IAAA,SAAS,EAAC,mBAAzB;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,kBAFJ,CAFJ,eAOI;AAAK,IAAA,SAAS,EAAC,qBAAf;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,kBAEI;AAAK,IAAA,SAAS,EAAC,eAAf;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,kBACI;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,kBAAI,oBAAC,QAAD;AAAU,IAAA,SAAS,EAAC,UAApB;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,IAAJ,UADJ,eAEI;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,KAAI5B,WAAJ,CAFJ,eAII;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,kBAAI,oBAAC,KAAD;AAAO,IAAA,SAAS,EAAC,UAAjB;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,IAAJ,WAJJ,EAKKI,WAAW,CAAC8B,MAAZ,GACG9B,WAAW,CAAC+B,GAAZ,CAAgB,CAACZ,IAAD,EAAOa,KAAP,kBAAiB;AAAG,IAAA,SAAS,EAAC,oBAAb;AAAkC,IAAA,GAAG,EAAEA,KAAvC;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,KAA+Cb,IAAI,CAACR,IAApD,CAAjC,CADH,GAEK,IAPV,CAFJ,eAYI;AAAK,IAAA,SAAS,EAAC,gBAAf;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,KAEKb,WAAW,CAACgC,MAAZ,GAAqB,CAArB,GACGhC,WAAW,CAACiC,GAAZ,CAAgB,CAACZ,IAAD,EAAOa,KAAP,KAAiB;AAC7B,wBACI;AAAK,MAAA,GAAG,EAAEA,KAAV;AAAiB,MAAA,SAAS,EAAC,wBAA3B;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,oBACI;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,oBAAI;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,OAAOb,IAAI,CAACQ,IAAZ,CAAJ,CADJ,eAEI;AAAG,MAAA,SAAS,EAAC,oBAAb;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,OAAmCR,IAAI,CAACO,GAAxC,CAFJ,CADJ;AAMH,GAPD,CADH,GAQQ,IAVb,EAaKtB,QAAQ,CAAC0B,MAAT,GAAkB1B,QAAQ,CAAC2B,GAAT,CAAa,CAACE,OAAD,EAAUD,KAAV,KAAoB;AAChD,wBACI;AAAK,MAAA,GAAG,EAAEA,KAAV;AAAiB,MAAA,SAAS,EAAC,wBAA3B;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,oBACI;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,OAAKC,OAAO,CAACtB,IAAb,eAAkB;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,OAAOsB,OAAO,CAACN,IAAf,CAAlB,CADJ,eAEI;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,OAAIM,OAAO,CAACP,GAAZ,CAFJ,CADJ;AAMH,GAPkB,CAAlB,GAOI,IApBT,CAZJ,CAPJ,eA2CI;AAAK,IAAA,SAAS,EAAC,uBAAf;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,kBACI;AAAK,IAAA,SAAS,EAAC,gBAAf;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,kBACI;AACI,IAAA,UAAU,EAAGQ,KAAD,IAAWA,KAAK,CAACC,GAAN,KAAc,OAAd,GAAwBZ,WAAW,EAAnC,GAAwC,IADnE;AAEI,IAAA,QAAQ,EAAGW,KAAD,IAAW/B,aAAa,CAAC+B,KAAK,CAACE,MAAN,CAAaC,KAAd,CAFtC;AAGI,IAAA,SAAS,EAAC,oBAHd;AAII,IAAA,WAAW,EAAC,eAJhB;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,IADJ,eAMI;AACI,IAAA,OAAO,EAAEd,WADb;AAEI,IAAA,SAAS,EAAC,qBAFd;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,kBAEoC,oBAAC,QAAD;AAAU,IAAA,SAAS,EAAC,mBAApB;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,IAFpC,CANJ,CADJ,CA3CJ,CADJ,CADJ;AA6DH,CA3ID;;AA6IA,eAAe/B,IAAf","sourcesContent":["import React, { useState, useEffect } from 'react';\nimport queryString from 'query-string';\nimport { Link } from 'react-router-dom';\nimport { ReactComponent as Logo } from './heart.svg';\nimport { ReactComponent as ChatLogo } from './chat-logo.svg';\nimport { ReactComponent as Users } from './group.svg';\nimport { ReactComponent as SendIcon } from './send-message.svg';\nimport './Chat.css';\nconst moment = require('moment');\n\n// Setting up Socket on a Front-End\nconst io = require('socket.io-client');\nconst localhost = 'http://localhost:5000';\n\nconst Chat = ({ location }) => {\n    const [enteredUser, setEnteredUser] = useState('');\n    const [enteredRoom, setEnteredRoom] = useState('');\n    const [welcomeUser, setWelcomeUser] = useState([]);\n    const [onlineUsers, setOnlineUsers] = useState([]);\n    const [inputValue, setInputValue] = useState('');\n    const [messages, setMessages] = useState('');\n    const socket = io.connect(localhost);\n\n\n\n    // 1 Initial connection and disconnection\n    useEffect(() => {\n        console.log('onlineUsers', v)\n        // const socket = io.connect(localhost);\n        const { name, room } = queryString.parse(location.search);\n        setEnteredUser(name);\n        setEnteredRoom(room);\n\n        socket.emit('newUser', ({ name, room }), (error) => {\n            console.error('error on client');\n        });\n\n        return () => {\n            socket.disconnect();\n        }\n    }, [location.search]);\n\n\n    // 2 Handling welcome, new user messages.\n    useEffect(() => {\n        socket.on('welcome', (user) => {\n            console.log('user  on welcome || left ', user)\n            if (user.name) {\n                setWelcomeUser(oldstate => [...oldstate, user])\n            }\n        })\n    });\n\n\n    //  3 Handling user left message\n    useEffect(() => {\n        socket.on('disconnectedUser', (lefUser) => {\n            console.log('disconnectedUser', lefUser)\n            setWelcomeUser(oldstate => [...oldstate, lefUser])\n        })\n    });\n\n\n    // 4 Handling online users\n    useEffect(() => {\n        socket.on('onlineUsers', (theOnlineUsers) => {\n            console.log('onlineUsers', theOnlineUsers)\n            // setOnlineUsers(prevOnlineUsers => [...prevOnlineUsers, theOnlineUsers])\n            setOnlineUsers(theOnlineUsers)\n        })\n    });\n\n    // 5 Handling sending meesage\n    const sendMessage = () => {\n        const theMessage = {\n            name: enteredUser.toLowerCase(),\n            room: enteredRoom.toLowerCase(),\n            msg: inputValue,\n            time: moment().format('h:m:s a')\n        }\n        socket.emit('message', (theMessage))\n    };\n\n    // 6 Handling recieved message from socket\n    useEffect(() => {\n        socket.on('theMessage', (theMessage) => {\n            console.log('theMessage', theMessage)\n            setMessages(prevMessage => [...prevMessage, theMessage])\n        })\n    })\n\n\n    return (\n        <main className=\"main-block\" >\n            <div className=\"flex-main\">\n                {/* flex-header */}\n                <div className=\"flex-item flex-header\">\n                    <h3>Chat&Me<Logo className=\"logo-header\" /></h3>\n                    <Link to={'/'} className=\"leave-room-button\">Leave Room</Link>\n                </div>\n                {/* flex-body */}\n                <div className=\"flex-item flex-body\">\n                    {/* flex-body-nav */}\n                    <div className=\"flex-body-nav\">\n                        <h3><ChatLogo className=\"logo-nav\" />Room:</h3>\n                        <p>{enteredRoom}</p>\n                        {/* Online Users */}\n                        <h3><Users className=\"logo-nav\" />Users:</h3>\n                        {onlineUsers.length ?\n                            onlineUsers.map((user, index) => <p className=\"first-capital-case\" key={index}>{user.name}</p>)\n                            : null}\n                    </div>\n                    {/* flex-body-chat */}\n                    <div className=\"flex-body-chat\">\n                        {/* Welcome message */}\n                        {welcomeUser.length > 0 ?\n                            welcomeUser.map((user, index) => {\n                                return (\n                                    <div key={index} className=\"flex-body-chat-message\">\n                                        <h5><span>{user.time}</span></h5>\n                                        <p className=\"first-capital-case\">{user.msg}</p>\n                                    </div>\n                                )\n                            }) : null\n                        }\n                        {/* Messages */}\n                        {messages.length ? messages.map((message, index) => {\n                            return (\n                                <div key={index} className=\"flex-body-chat-message\">\n                                    <h5>{message.name}<span>{message.time}</span></h5>\n                                    <p>{message.msg}</p>\n                                </div>\n                            )\n                        }) : null}\n                    </div>\n                </div>\n                {/* flex-footer */}\n                <div className=\"flex-item flex-footer\">\n                    <div className=\"footer-wrapper\">\n                        <input\n                            onKeyPress={(event) => event.key === \"Enter\" ? sendMessage() : null}\n                            onChange={(event) => setInputValue(event.target.value)}\n                            className=\"send-message-input\"\n                            placeholder=\"Enter message\" />\n                        <button\n                            onClick={sendMessage}\n                            className=\"send-message-button\"><SendIcon className=\"send-message-icon\" /></button>\n\n                    </div>\n                </div>\n            </div>\n        </main >\n    )\n}\n\nexport default Chat"]},"metadata":{},"sourceType":"module"}