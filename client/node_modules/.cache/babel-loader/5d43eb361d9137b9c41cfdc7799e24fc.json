{"ast":null,"code":"var _jsxFileName = \"/Users/nikitapetrov/Desktop/chat_me_app/client/src/components/Chat/Chat.js\";\nimport React, { useState, useEffect } from 'react';\nimport queryString from 'query-string';\nimport { Link } from 'react-router-dom';\nimport { ReactComponent as Logo } from \"@svgr/webpack?-svgo,+titleProp,+ref!./heart.svg\";\nimport { ReactComponent as ChatLogo } from \"@svgr/webpack?-svgo,+titleProp,+ref!./chat-logo.svg\";\nimport { ReactComponent as Users } from \"@svgr/webpack?-svgo,+titleProp,+ref!./group.svg\";\nimport { ReactComponent as SendIcon } from \"@svgr/webpack?-svgo,+titleProp,+ref!./send-message.svg\";\nimport './Chat.css'; // Setting up Socket on a Front-End\n\nconst io = require('socket.io-client');\n\nconst Chat = ({\n  location\n}) => {\n  const [enteredUser, setEnteredUser] = useState('');\n  const [enteredRoom, setEnteredRoom] = useState('');\n  const [onlineUsers, setOnlineUsers] = useState([]);\n  const [joinedUser, setJoinedUser] = useState({});\n  const [inputValue, setInputValue] = useState('');\n  const [allMessages, setAllMessages] = useState([]);\n  const socket = io.connect('http://localhost:5000');\n  useEffect(() => {\n    console.log('useEffect'); //New user\n\n    const newUser = queryString.parse(location.search);\n    socket.emit('newUser', newUser, error => {\n      console.log('error', error); //last callback is for network issues.\n    });\n    return () => {\n      console.log('unmounted');\n      socket.disconnect();\n    };\n  }, []); // Welcome joined user message \n\n  useEffect(() => {\n    console.log('useEffect2');\n    socket.on('newUserJoined', joinedUserServer => {\n      console.log(`${joinedUserServer.user.name} with id ${joinedUserServer.user.id} just joined the room at ${joinedUserServer.user.time}`);\n      setJoinedUser(joinedUserServer.user);\n    });\n    console.log('joinedUSER after update', joinedUser);\n  }, [joinedUser]); // Welcome \n\n  function Welcome() {\n    console.log('Welcome function triggered with :', joinedUser);\n    return /*#__PURE__*/React.createElement(\"div\", {\n      className: \"flex-body-chat-message\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 52,\n        columnNumber: 13\n      }\n    }, /*#__PURE__*/React.createElement(\"h5\", {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 53,\n        columnNumber: 17\n      }\n    }, joinedUser.user.name, /*#__PURE__*/React.createElement(\"span\", {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 53,\n        columnNumber: 43\n      }\n    }, joinedUser.user.time)), /*#__PURE__*/React.createElement(\"p\", {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 54,\n        columnNumber: 17\n      }\n    }, joinedUser.user.name, \" just joined the room!\"));\n  }\n\n  ;\n  return /*#__PURE__*/React.createElement(\"main\", {\n    className: \"main-block\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 61,\n      columnNumber: 9\n    }\n  }, /*#__PURE__*/React.createElement(\"div\", {\n    className: \"flex-main\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 62,\n      columnNumber: 13\n    }\n  }, /*#__PURE__*/React.createElement(\"div\", {\n    className: \"flex-item flex-header\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 64,\n      columnNumber: 17\n    }\n  }, /*#__PURE__*/React.createElement(\"h3\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 65,\n      columnNumber: 21\n    }\n  }, \"Chat&Me\", /*#__PURE__*/React.createElement(Logo, {\n    className: \"logo-header\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 65,\n      columnNumber: 32\n    }\n  })), /*#__PURE__*/React.createElement(Link, {\n    to: '/',\n    className: \"leave-room-button\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 66,\n      columnNumber: 21\n    }\n  }, \"Leave Room\")), /*#__PURE__*/React.createElement(\"div\", {\n    className: \"flex-item flex-body\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 69,\n      columnNumber: 17\n    }\n  }, /*#__PURE__*/React.createElement(\"div\", {\n    className: \"flex-body-nav\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 71,\n      columnNumber: 21\n    }\n  }, /*#__PURE__*/React.createElement(\"h3\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 72,\n      columnNumber: 25\n    }\n  }, /*#__PURE__*/React.createElement(ChatLogo, {\n    className: \"logo-nav\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 72,\n      columnNumber: 29\n    }\n  }), \"Room:\"), /*#__PURE__*/React.createElement(\"p\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 73,\n      columnNumber: 25\n    }\n  }, \"Room1\"), /*#__PURE__*/React.createElement(\"h3\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 74,\n      columnNumber: 25\n    }\n  }, /*#__PURE__*/React.createElement(Users, {\n    className: \"logo-nav\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 74,\n      columnNumber: 29\n    }\n  }), \"Users:\"), /*#__PURE__*/React.createElement(\"p\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 75,\n      columnNumber: 25\n    }\n  }, \"Nick\"), /*#__PURE__*/React.createElement(\"p\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 76,\n      columnNumber: 25\n    }\n  }, \"Body\"), /*#__PURE__*/React.createElement(\"p\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 77,\n      columnNumber: 25\n    }\n  }, \"Paul\"), /*#__PURE__*/React.createElement(\"p\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 78,\n      columnNumber: 25\n    }\n  }, \"Alan\"), /*#__PURE__*/React.createElement(\"p\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 79,\n      columnNumber: 25\n    }\n  }, \"Tony\")), /*#__PURE__*/React.createElement(\"div\", {\n    className: \"flex-body-chat\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 82,\n      columnNumber: 21\n    }\n  }, joinedUser ? /*#__PURE__*/React.createElement(Welcome, {\n    joinedUser: joinedUser,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 83,\n      columnNumber: 39\n    }\n  }) : null, /*#__PURE__*/React.createElement(\"div\", {\n    className: \"flex-body-chat-message\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 84,\n      columnNumber: 25\n    }\n  }, /*#__PURE__*/React.createElement(\"h5\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 85,\n      columnNumber: 29\n    }\n  }, \"Name of Participant\", /*#__PURE__*/React.createElement(\"span\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 85,\n      columnNumber: 52\n    }\n  }, \"Time\")), /*#__PURE__*/React.createElement(\"p\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 86,\n      columnNumber: 29\n    }\n  }, \"The message from participant\")))), /*#__PURE__*/React.createElement(\"div\", {\n    className: \"flex-item flex-footer\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 100,\n      columnNumber: 17\n    }\n  }, /*#__PURE__*/React.createElement(\"div\", {\n    className: \"footer-wrapper\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 101,\n      columnNumber: 21\n    }\n  }, /*#__PURE__*/React.createElement(\"input\", {\n    onChange: e => setInputValue(e.target.value),\n    className: \"send-message-input\",\n    placeholder: \"Enter message\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 102,\n      columnNumber: 25\n    }\n  }), /*#__PURE__*/React.createElement(\"button\", {\n    onClick: () => setAllMessages([...allMessages, inputValue]),\n    className: \"send-message-button\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 106,\n      columnNumber: 25\n    }\n  }, /*#__PURE__*/React.createElement(SendIcon, {\n    className: \"send-message-icon\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 108,\n      columnNumber: 61\n    }\n  }))))));\n};\n\nexport default Chat;","map":{"version":3,"sources":["/Users/nikitapetrov/Desktop/chat_me_app/client/src/components/Chat/Chat.js"],"names":["React","useState","useEffect","queryString","Link","io","require","Chat","location","enteredUser","setEnteredUser","enteredRoom","setEnteredRoom","onlineUsers","setOnlineUsers","joinedUser","setJoinedUser","inputValue","setInputValue","allMessages","setAllMessages","socket","connect","console","log","newUser","parse","search","emit","error","disconnect","on","joinedUserServer","user","name","id","time","Welcome","e","target","value"],"mappings":"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","sourcesContent":["import React, { useState, useEffect } from 'react';\nimport queryString from 'query-string';\nimport { Link } from 'react-router-dom';\nimport { ReactComponent as Logo } from './heart.svg';\nimport { ReactComponent as ChatLogo } from './chat-logo.svg';\nimport { ReactComponent as Users } from './group.svg';\nimport { ReactComponent as SendIcon } from './send-message.svg';\nimport './Chat.css';\n// Setting up Socket on a Front-End\nconst io = require('socket.io-client')\n\n\nconst Chat = ({ location }) => {\n    const [enteredUser, setEnteredUser] = useState('');\n    const [enteredRoom, setEnteredRoom] = useState('');\n    const [onlineUsers, setOnlineUsers] = useState([]);\n    const [joinedUser, setJoinedUser] = useState({})\n    const [inputValue, setInputValue] = useState('');\n    const [allMessages, setAllMessages] = useState([]);\n\n\n    const socket = io.connect('http://localhost:5000');\n\n    useEffect(() => {\n        console.log('useEffect');\n        //New user\n        const newUser = queryString.parse(location.search)\n        socket.emit('newUser', (newUser), (error) => {\n            console.log('error', error);\n            //last callback is for network issues.\n        })\n        return () => {\n            console.log('unmounted');\n            socket.disconnect();\n        }\n    }, [])\n\n    // Welcome joined user message \n    useEffect(() => {\n        console.log('useEffect2');\n        socket.on('newUserJoined', (joinedUserServer) => {\n            console.log(`${joinedUserServer.user.name} with id ${joinedUserServer.user.id} just joined the room at ${joinedUserServer.user.time}`);\n            setJoinedUser(joinedUserServer.user);\n        })\n        console.log('joinedUSER after update', joinedUser);\n    }, [joinedUser])\n\n    // Welcome \n    function Welcome() {\n        console.log('Welcome function triggered with :', joinedUser);\n        return (\n            < div className=\"flex-body-chat-message\" >\n                <h5>{joinedUser.user.name}<span>{joinedUser.user.time}</span></h5>\n                <p>{joinedUser.user.name} just joined the room!</p>\n            </div >\n        )\n    };\n\n\n    return (\n        <main className=\"main-block\" >\n            <div className=\"flex-main\">\n                {/* flex-header */}\n                <div className=\"flex-item flex-header\">\n                    <h3>Chat&Me<Logo className=\"logo-header\" /></h3>\n                    <Link to={'/'} className=\"leave-room-button\">Leave Room</Link>\n                </div>\n                {/* flex-body */}\n                <div className=\"flex-item flex-body\">\n                    {/* flex-body-nav */}\n                    <div className=\"flex-body-nav\">\n                        <h3><ChatLogo className=\"logo-nav\" />Room:</h3>\n                        <p>Room1</p>\n                        <h3><Users className=\"logo-nav\" />Users:</h3>\n                        <p>Nick</p>\n                        <p>Body</p>\n                        <p>Paul</p>\n                        <p>Alan</p>\n                        <p>Tony</p>\n                    </div>\n                    {/* flex-body-chat */}\n                    <div className=\"flex-body-chat\">\n                        {joinedUser ? <Welcome joinedUser={joinedUser} /> : null}\n                        <div className=\"flex-body-chat-message\">\n                            <h5>Name of Participant<span>Time</span></h5>\n                            <p>The message from participant</p>\n                        </div>\n\n                        {/* <div className=\"flex-body-chat-message\">\n                            <h5>Name of Participant<span>Time</span></h5>\n                            <p>The message from participant</p>\n                        </div>\n                        <div className=\"flex-body-chat-message\">\n                            <h5>Name of Participant<span>Time</span></h5>\n                            <p>The message from participant</p>\n                        </div> */}\n                    </div>\n                </div>\n                {/* flex-footer */}\n                <div className=\"flex-item flex-footer\">\n                    <div className=\"footer-wrapper\">\n                        <input\n                            onChange={(e) => setInputValue(e.target.value)}\n                            className=\"send-message-input\"\n                            placeholder=\"Enter message\" />\n                        <button\n                            onClick={() => setAllMessages([...allMessages, inputValue])}\n                            className=\"send-message-button\"><SendIcon className=\"send-message-icon\" /></button>\n\n                    </div>\n                </div>\n            </div>\n        </main >\n    )\n}\n\nexport default Chat"]},"metadata":{},"sourceType":"module"}